
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Design decisions for tempo, beat, and downbeat &#8212; Tempo, Beat and Downbeat Estimation</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet" />
  <link href="../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/sphinx-book-theme.e2363ea40746bee74734a24ffefccd78.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Table of reference works" href="table.html" />
    <link rel="prev" title="Post-processing" href="postprocessing.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Tempo, Beat and Downbeat Estimation</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../intro.html">
   Tempo, Beat, and Downbeat Estimation
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Introduction
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../ch1_intro/tutorial_structure.html">
   Tutorial structure and setup
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ch1_intro/tutorial_scope.html">
   Tutorial scope and prerequisites
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Basics of tempo, beat, and downbeat
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../ch2_basics/definition.html">
   Definition by sound example
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ch2_basics/annotation.html">
   How do we annotate?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ch2_basics/baseline.html">
   Baseline approach
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ch2_basics/evaluate.html">
   How do we evaluate?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ch2_basics/perspectives.html">
   Perspectives
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Going deep: theoretical underpinnings
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="overview.html">
   Deep learning approaches
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="dnns.html">
   On different DNN architectures
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="postprocessing.html">
   Post-processing
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Design decisions for tempo, beat, and downbeat
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="table.html">
   Table of reference works
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Going deeper: practial examples
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../ch4_going_deeper/building_tcn_models.html">
   Hands on!
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Discussion and conclusions
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../ch5_discussion/open_challenges.html">
   Concluding remarks
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Resources
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../ch6_resources/references.html">
   References
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ch6_resources/acknowledgments.html">
   Acknowledgments
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../ch6_resources/authors.html">
   About the Authors
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/ch3_going_deep/design_decisions.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/TempoBeatDownbeat/tutorial"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/TempoBeatDownbeat/tutorial/issues/new?title=Issue%20on%20page%20%2Fch3_going_deep/design_decisions.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Design decisions for tempo, beat, and downbeat
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#input-representation">
   Input representation
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#granularity">
   Granularity
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dnn-architecture">
   DNN architecture
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#post-processing">
   Post-processing
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="design-decisions-for-tempo-beat-and-downbeat">
<h1>Design decisions for tempo, beat, and downbeat<a class="headerlink" href="#design-decisions-for-tempo-beat-and-downbeat" title="Permalink to this headline">¶</a></h1>
<p>To this point we hope you have an idea of the <strong>many</strong> different variations of systems for beat and downbeat
tracking! In the following we discuss the importance of the different design choices for these systems, to gain some insights of
the more critical aspects of it, and comment on our insight on what matters the most.</p>
<div class="figure align-default" id="id9">
<img alt="Design of beat/downbeat systems." src="../_images/design_choices.png" />
<p class="caption"><span class="caption-number">Fig. 19 </span><span class="caption-text">Design choices include input granularity and representation, architecture and postprocessing.</span><a class="headerlink" href="#id9" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="input-representation">
<h1>Input representation<a class="headerlink" href="#input-representation" title="Permalink to this headline">¶</a></h1>
<p>Several different input representations have been studied in the context of both
beat and downbeat tracking: harmonic-based (e.g. chroma), event-oriented (e.g. spec-flux), spectrograms, etc.</p>
<p>Even though there are works that show advantages of using multiple input representations to increase robustness
across different music genres <span id="id1">[<a class="reference internal" href="../ch6_resources/references.html#id60">DBDR16</a>, <a class="reference internal" href="../ch6_resources/references.html#id65">DBDR17</a>, <a class="reference internal" href="../ch6_resources/references.html#id31">FMC+19</a>, <a class="reference internal" href="../ch6_resources/references.html#id9">FMC+18</a>, <a class="reference internal" href="../ch6_resources/references.html#id12">KBockDW16</a>, <a class="reference internal" href="../ch6_resources/references.html#id203">ZDGomez14</a>]</span>, results
obtained using spectrograms have shown to be as competitive, and thus is not clear that adding multiple features is an advantage,
especially since it increases the system’s complexity considerably (e.g. if the multiple representations are included as an
ensamble of networks like <span id="id2">[<a class="reference internal" href="../ch6_resources/references.html#id60">DBDR16</a>, <a class="reference internal" href="../ch6_resources/references.html#id65">DBDR17</a>, <a class="reference internal" href="../ch6_resources/references.html#id31">FMC+19</a>, <a class="reference internal" href="../ch6_resources/references.html#id9">FMC+18</a>, <a class="reference internal" href="../ch6_resources/references.html#id12">KBockDW16</a>]</span>).`</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can use a log-spectrogram or mel-spectrogram to simplify your pipeline and get sota results!</p>
</div>
</div>
<div class="section" id="granularity">
<h1>Granularity<a class="headerlink" href="#granularity" title="Permalink to this headline">¶</a></h1>
<p>The temporal granularity of the input observations (or temporal grid) relates to important aspects of the design of beat and downbeat tracking systems.
It determines the length of the context taken into account around musical events, which controls design decisions in the network architecture, such as
filter sizes in a CNN, or the length of training sequences in an RNN.</p>
<p>Among the different systems, several granularities have been used. In particular, some systems use either musically motivated temporal grids (such as tatums
or beats) <span id="id3">[<a class="reference internal" href="../ch6_resources/references.html#id60">DBDR16</a>, <a class="reference internal" href="../ch6_resources/references.html#id9">FMC+18</a>, <a class="reference internal" href="../ch6_resources/references.html#id12">KBockDW16</a>]</span>  or fixed length frames <span id="id4">[<a class="reference internal" href="../ch6_resources/references.html#id214">BockKW16</a>]</span>.  Systems that use beat- or tatum-synchronous
input depend on reliable beat/tatum estimation upstream, so they are inherently more complex, and prone to error propagation. On the other hand, frame-based
systems are not subject to these problems, but the input dimensionality is much higher due to the increased observation rate, which causes difficulties
when training the models.</p>
<p>CNNs tend to handle limited context so coarser granularities, and it has been shown that RNNs work better with coarser granularities <span id="id5">[<a class="reference internal" href="../ch6_resources/references.html#id9">FMC+18</a>]</span> as they have more difficulty to model long temporal
dependencies which are inherent to finer granularities. On the other hand CRNNs or LSTMs seem more robust to different coarseness. TCNs are more robust to finer granularities and
are able to extract information at different time scales.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The choice of the input granularity should match the architecture used. A simple approach is to use architectures that are more
robust to different granularities and not worry about it (see above).</p>
</div>
</div>
<div class="section" id="dnn-architecture">
<h1>DNN architecture<a class="headerlink" href="#dnn-architecture" title="Permalink to this headline">¶</a></h1>
<p>Given the same data, input features, post-processing and evaluation scheme different architectures can achieve similar performance  <span id="id6">[<a class="reference internal" href="../ch6_resources/references.html#id9">FMC+18</a>]</span>,
if the input granularity and architecture is optimized for performance. In other words, architecture matters more because of model
complexity, portability or interpretability than for performance.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Several architectures perform comparably, so the most relevant choice might be simplicity and interpretability of the
system.</p>
</div>
</div>
<div class="section" id="post-processing">
<h1>Post-processing<a class="headerlink" href="#post-processing" title="Permalink to this headline">¶</a></h1>
<p>The importance of the post-processing stage has been mentioned in multiple works <span id="id7">[<a class="reference internal" href="../ch6_resources/references.html#id65">DBDR17</a>, <a class="reference internal" href="../ch6_resources/references.html#id9">FMC+18</a>, <a class="reference internal" href="../ch6_resources/references.html#id12">KBockDW16</a>]</span>.
So far, post-processing with most graphical models almost always helps improve the model. However, the importance of this stage (i.e.
how much it improves performance) depends on the temporal granularity, the network architecture and the dataset. For datasets with very
danceable genres post-processing can boost performance considerably <span id="id8">[<a class="reference internal" href="../ch6_resources/references.html#id9">FMC+18</a>]</span>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Post-processing using graphical models almost always improves performance (and rarely hurts), and different variants of
graphical models (discriminative, generative, HMMS, CRFS, DBNS) perform similarly.</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./ch3_going_deep"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
            



<div class='prev-next-bottom'>
    
    <div id="prev">
        <a class="left-prev" href="postprocessing.html" title="previous page">
            <i class="prevnext-label fas fa-angle-left"></i>
            <div class="prevnext-info">
                <p class="prevnext-label">previous</p>
                <p class="prevnext-title">Post-processing</p>
            </div>
        </a>
    </div>
     <div id="next">
        <a class="right-next" href="table.html" title="next page">
            <div class="prevnext-info">
                <p class="prevnext-label">next</p>
                <p class="prevnext-title">Table of reference works</p>
            </div>
            <i class="prevnext-label fas fa-angle-right"></i>
        </a>
     </div>

</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By Matthew E. P. Davies, Sebastian Bock, Magdalena Fuentes<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
  </body>
</html>